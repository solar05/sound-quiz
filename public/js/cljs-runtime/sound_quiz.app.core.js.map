{"version":3,"sources":["sound_quiz/app/core.cljs"],"mappings":";AAKA,AAAA,AAAAA,AAAAC,AAAAC,AAAAC;AAAA;AAAA,AAAA,AAASC,AAAc,AAACC;;AAExB,AAAA,AAAMC,AACHC;AADH,AAEE,AAAMC,AAAI,AAACC,AAAY,AAACC,AAASH,AACV,AAAA,AAACI,AACDC;AAFvB,AAIE,AAAA,AAACC,AAAWL,AACAJ,AACA,AAACU,AAAeV;;AAIhC,AAAA,AAAMW,AAAeC;AAArB,AACE,AAACN,AAASM;;AAEZ,AAAA,AAAMC;AAAN,AACE,AAAMC,AAAM,AAACC;AACPC,AAAK,AAACC,AAAYH;AAClBI,AAAc,AAACC,AAAYH,AAAKF;AAChCF,AAAK,AAACQ,AAAa,AAAA,AAAA,AAACJ,AAAAA,AAAAA;AAH1B,AAIE,AACE,AAACL,AAAcC;;AACf,AAACV,AAAaU;;AAEpB,AAAA,AAAMS;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAIyER;;AAIzE,AAAA,AAAMS;AAAN,AACE,AAAA,AAACC,AAAaF,AAAK,AAAA,AAAiBG;;AAEtC,AAAA,AAAeC;AAAf,AACE,AAACH;;;AAEH,AAAA,AAAuBI;AAAvB,AACE,AAACJ","names":["js/sound-quiz","js/sound-quiz.app","js/sound-quiz.app.core","js/sound-quiz.app.core.audio-context","sound-quiz.app.core/audio-context","cljs-bach.synthesis/audio-context","sound-quiz.app.core/playback-mp3","url","mp3","cljs_bach.synthesis.connect__GT_","cljs-bach.synthesis/sample","cljs-bach.synthesis/gain","cljs-bach.synthesis/destination","cljs-bach.synthesis/run-with","cljs-bach.synthesis/current-time","sound-quiz.app.core/preload-sound","path","sound-quiz.app.core/run-sound","tasks","sound-quiz.app.tasks/shuffle-tasks","task","sound-quiz.app.tasks/take-task","updated-tasks","sound-quiz.app.tasks/drop-task","sound-quiz.app.tasks/build-path","sound-quiz.app.core/app","sound-quiz.app.core/render","reagent.dom.render","js/document","sound-quiz.app.core/main","sound-quiz.app.core/reload!"],"sourcesContent":["(ns sound-quiz.app.core\n  (:require [reagent.dom :as rdom]\n            [cljs-bach.synthesis :as b]\n            [sound-quiz.app.tasks :as t]))\n\n(defonce audio-context (b/audio-context))\n\n(defn playback-mp3\n  [url]\n  (let [mp3 (b/connect-> (b/sample url)  ; read file using js ajax, including caching\n                         (b/gain 0.5)    ; you can chain optional effects here\n                         b/destination)  ; loudspeakers\n        ]\n    (b/run-with mp3\n                audio-context\n                (b/current-time audio-context) \n                3.0  ; play for 3 seconds\n                )))\n\n(defn preload-sound [path]\n  (b/sample path))\n\n(defn run-sound []\n  (let [tasks (t/shuffle-tasks)\n        task (t/take-task tasks)\n        updated-tasks (t/drop-task task tasks)\n        path (t/build-path (task :title))]\n    (do\n      (preload-sound path)\n      (playback-mp3 path))))\n\n(defn app []\n  [:div {:class \"container\"}\n   [:div {:class \"jumbotron\"}\n    [:h1 {:class \"display-4\"} \"Game Sound Quiz!\"]\n    [:input.btn.btn-success {:type \"button\" :value \"Click me!\" :on-click run-sound}]]\n   ])\n\n\n(defn render []\n  (rdom/render [app] (.getElementById js/document \"root\")))\n\n(defn ^:export main []\n  (render))\n\n(defn ^:dev/after-load reload! []\n  (render))\n\n"]}